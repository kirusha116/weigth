const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/InputString-BlCsANGN.js","assets/index-azzbziMv.js","assets/index-B3MVZZcz.css","assets/input-C2Yzk38p.js","assets/utils-BbevBD0L.js","assets/label-7UAcHApp.js","assets/index-C8bdZDml.js","assets/App-Dvln5Lgc.js","assets/index.esm-DCx0i9Hx.js","assets/successToast-bPieWidY.js","assets/InputWeight-CxKNqbML.js","assets/InputCallories-D6PVS-UV.js","assets/FormButtons-CW6pDIW2.js","assets/button-CuIXZFQ5.js"])))=>i.map(i=>d[i]);
import{m as b,e as a,l as h,o as C,r as n,i as j,j as i,n as E,h as d,_ as m}from"./index-azzbziMv.js";import{u as D}from"./index.esm-DCx0i9Hx.js";import{a as I,u as N}from"./App-Dvln5Lgc.js";import{s as O}from"./successToast-bPieWidY.js";const e={name:"name",startWeight:"startWeight",targetWeight:"targetWeight",maxCallories:"maxCallories"},U={[e.name]:"Имя",[e.startWeight]:"Начальный вес",[e.targetWeight]:"Цель",[e.maxCallories]:"Допустимое количество каллорий в день"};function v(r,l){const t={};return r.startWeight&&(t.startWeight=Number(r.startWeight)),r.targetWeight&&(t.targetWeight=Number(r.targetWeight)),r.maxCallories&&(t.maxCallories=Number(r.maxCallories)),!l&&t.startWeight&&(t.startWeightDate=b(),t.currentWeightDate=t.startWeightDate,t.currentWeight=t.startWeight),t}const P=n.lazy(()=>m(()=>import("./InputString-BlCsANGN.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9]))),W=n.lazy(()=>m(()=>import("./InputWeight-CxKNqbML.js"),__vite__mapDeps([10,1,2,3,4,5,6,7,8,9]))),A=n.lazy(()=>m(()=>import("./InputCallories-D6PVS-UV.js"),__vite__mapDeps([11,1,2,3,4,5,6,7,8,9]))),F=n.lazy(()=>m(()=>import("./FormButtons-CW6pDIW2.js"),__vite__mapDeps([12,1,2,13,4])));function T(){const r=I(),l=a.currentUser?.displayName||localStorage.getItem(h),{startWeight:t,targetWeight:u,maxCallories:c,startWeightDate:_}=N(),{register:g,handleSubmit:p,reset:f,setValue:s}=D({defaultValues:{name:l,startWeight:t?.toString(),targetWeight:u?.toString(),maxCallories:c?.toString()}});C(a,()=>{s("name",a.currentUser?.displayName)}),n.useEffect(()=>{(async()=>(await r(j()),s("startWeight",t?.toString()),s("targetWeight",u?.toString()),s("maxCallories",c?.toString())))()},[r,c,s,t,u]);const x=async o=>{a.currentUser?a.currentUser?.displayName!==o.name&&await E(a.currentUser,{displayName:o.name}):localStorage.getItem(h)!==o.name&&localStorage.setItem(h,o.name);const S=Object.fromEntries(Object.entries(o).filter(y=>y[0]!=="name"));r(d(v(S,_))),O("Сохранено!")};return i.jsxs("form",{onSubmit:p(x),children:[i.jsx(P,{settingsKey:e.name,register:g(e.name)}),i.jsx(W,{settingsKey:e.startWeight,register:g(e.startWeight),setValue:s}),i.jsx(W,{settingsKey:e.targetWeight,register:g(e.targetWeight),setValue:s}),i.jsx(A,{settingsKey:e.maxCallories,register:g(e.maxCallories),setValue:s}),i.jsx(F,{reset:f})]})}const K=Object.freeze(Object.defineProperty({__proto__:null,default:T},Symbol.toStringTag,{value:"Module"}));export{K as F,U as s};
