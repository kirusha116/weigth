import{j as e,r as b}from"./index-BeCuPwBW.js";import{u as N,B as m,c as J,a as F}from"./storageHooks-CwwqM7_V.js";import{c as f,u as A,g as p,t as v,h as C,B as K}from"./App-D2-Ha4M8.js";import{D as Y,a as Z,b as W,c as ee,d as se,e as te,f as ae,g as D,h as re,P as z}from"./dialog-ZY2ljU6B.js";import{I as $}from"./input-BTxUv2af.js";import{u as x}from"./index-4_FsjE0m.js";import{TasksDay as ne}from"./Tasks-DurTjyvE.js";import{AwardsDay as le}from"./Awards-f-r_0IP8.js";import"./Item-CIJNBRdS.js";/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],oe=f("calendar-days",ie);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=[["path",{d:"M2.27 21.7s9.87-3.5 12.73-6.36a4.5 4.5 0 0 0-6.36-6.37C5.77 11.84 2.27 21.7 2.27 21.7zM8.64 14l-2.05-2.04M15.34 15l-2.46-2.46",key:"rfqxbe"}],["path",{d:"M22 9s-1.33-2-3.5-2C16.86 7 15 9 15 9s1.33 2 3.5 2S22 9 22 9z",key:"6b25w4"}],["path",{d:"M15 2s-2 1.33-2 3.5S15 9 15 9s2-1.84 2-3.5C17 3.33 15 2 15 2z",key:"fn65lo"}]],de=f("carrot",ce);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xe=[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]],ue=f("gauge",xe);/**
 * @license lucide-react v0.545.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const me=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],pe=f("sparkles",me);function he(){const s=A(),t=N().name;return e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"text-2xl leading-6 inline-block",children:t?e.jsx("b",{children:`Привет, ${t}!`}):e.jsxs(e.Fragment,{children:[e.jsx("b",{className:"mr-2 leading-9",children:"Привет!"}),e.jsx(m,{variant:"rose",className:"text-base leading-4",onClick:()=>s("/settings"),children:"Указать имя"})]})}),e.jsx("h2",{className:"text-md text-gray-700 mb-6",children:"Держись! Каждый маленький шаг - это прогресс!"})]})}function j({children:s}){return e.jsx(e.Fragment,{children:e.jsx("div",{className:"w-full p-1 bg-white",children:e.jsx("div",{className:"w-full rounded-xl p-4 border-2 bg-white ",children:s})})})}function ge({variant:s,dialogTriggerText:t,dialogHeader:a,defaultValue:r,onSave:n}){const[c,d]=b.useState();return e.jsxs(Y,{children:[e.jsx(Z,{asChild:!0,children:e.jsx(m,{variant:"rose",className:"block text-base leading-4 mb-4 mx-auto w-9/10",children:t})}),e.jsxs(W,{onOpenAutoFocus:l=>l.preventDefault(),showCloseButton:!1,className:"w-auto px-5 py-4",onCloseAutoFocus:()=>d(r),children:[e.jsxs(ee,{children:[e.jsx(se,{className:"m-auto mb-2 text-2xl",children:a}),e.jsxs(te,{className:"text-sm flex items-center mb-3",children:[e.jsx(oe,{className:"inline-block mx-2 size-4.5"}),e.jsx("span",{children:`Сегодня - 
                    ${new Date().toLocaleString("ru",{year:"numeric",month:"long",day:"numeric"})}`})]})]}),s==="weigth"&&e.jsx($,{className:"mb-3",onPaste:l=>l.preventDefault(),value:c,onInput:l=>{let o=l.target.value.replace(/[^0-9.,]/g,"");o=o.replace(",",".");const u=o.split(".");u.length>2&&(o=u[0]+"."+u.slice(1).join("")),Number(o)%1&&(o=(Math.floor(Number(o)*10)/10).toString()),d(o)}}),s==="callories"&&e.jsx($,{className:"mb-3",value:c,onPaste:l=>l.preventDefault(),onInput:l=>{const o=l.target.value.replace(/[^0-9]/g,"");d(o)}}),e.jsxs(ae,{children:[e.jsx(D,{asChild:!0,children:e.jsx(m,{variant:"outline",onClick:()=>{c&&n(Number(c))},children:"Сохранить"})}),e.jsx(D,{asChild:!0,children:e.jsx(m,{variant:"rose",children:"Отмена"})})]})]})]})}var w="Progress",y=100,[fe]=re(w),[je,ve]=fe(w),E=b.forwardRef((s,t)=>{const{__scopeProgress:a,value:r=null,max:n,getValueLabel:c=be,...d}=s;(n||n===0)&&!P(n)&&console.error(Ne(`${n}`,"Progress"));const l=P(n)?n:y;r!==null&&!S(r,l)&&console.error(we(`${r}`,"Progress"));const i=S(r,l)?r:null,o=g(i)?c(i,l):void 0;return e.jsx(je,{scope:a,value:i,max:l,children:e.jsx(z.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":g(i)?i:void 0,"aria-valuetext":o,role:"progressbar","data-state":L(i,l),"data-value":i??void 0,"data-max":l,...d,ref:t})})});E.displayName=w;var O="ProgressIndicator",R=b.forwardRef((s,t)=>{const{__scopeProgress:a,...r}=s,n=ve(O,a);return e.jsx(z.div,{"data-state":L(n.value,n.max),"data-value":n.value??void 0,"data-max":n.max,...r,ref:t})});R.displayName=O;function be(s,t){return`${Math.round(s/t*100)}%`}function L(s,t){return s==null?"indeterminate":s===t?"complete":"loading"}function g(s){return typeof s=="number"}function P(s){return g(s)&&!isNaN(s)&&s>0}function S(s,t){return g(s)&&!isNaN(s)&&s<=t&&s>=0}function Ne(s,t){return`Invalid prop \`max\` of value \`${s}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${y}\`.`}function we(s,t){return`Invalid prop \`value\` of value \`${s}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${y} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var ye=E,ke=R;function Me({className:s,value:t,...a}){return e.jsx(ye,{"data-slot":"progress",className:J("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",s),...a,children:e.jsx(ke,{"data-slot":"progress-indicator",className:"h-full w-full flex-1 transition-all bg-gray-300",style:{transform:`translateX(+${t}%)`}})})}function G({variant:s,icon:t,title1:a,title2:r,dialogTriggerText:n,dialogHeader:c,titleNumber:d,isButtonVisible:l,defaultDialogValue:i,progressValue:o,progressText:u,indicatorStyle:X,footerText:Q,onSave:U}){const k=!x("(min-width: 768px), (max-width: 639.5px)"),M=!x("(min-width: 400.5px)");return e.jsxs(e.Fragment,{children:[!(k||M)&&e.jsxs("div",{className:"flex flex-row justify-around items-center mb-3",children:[t,e.jsx("div",{className:"grow flex flex-row justify-center items-end",children:e.jsxs("p",{children:[e.jsx("b",{className:"text-xl mb-2",children:a+" -"}),e.jsx("b",{className:"text-4xl mb-2",children:` ${d} `}),e.jsx("b",{className:"text-2xl mb-2",children:r})]})})]}),(k||M)&&e.jsxs("div",{className:"flex flex-row justify-around items-center mb-3",children:[t,e.jsxs("div",{className:"grow",children:[e.jsx("p",{className:"text-xl text-center",children:e.jsx("b",{children:a})}),e.jsxs("p",{className:"text-xl mb-1 text-center",children:[e.jsx("b",{className:"text-4xl",children:` ${d} `}),e.jsx("b",{className:"text-2xl",children:r})]})]})]}),l&&e.jsx(ge,{variant:s,dialogTriggerText:n,dialogHeader:c,defaultValue:i,onSave:U}),e.jsx(Me,{value:o,className:`mb-2 ${X}`}),e.jsx("p",{className:"text-center",children:u}),e.jsx("p",{className:"text-center mt-2",children:`Не забывай записывать ${Q}!`}),e.jsx("p",{className:"text-center",children:"Каждый день за это ты получаешь звёздочки!"})]})}function De(s,{startWeigth:t,targetWeigth:a,currentWeigth:r,currentWeigthDate:n,balance:c},d){return{variant:"weigth",icon:e.jsx(ue,{className:"stroke-rose-300 size-14"}),title1:"Текущий вес ",title2:"кг",dialogTriggerText:`${s?"Р":"Записать р"}езультат взвешивания`,dialogHeader:"Запиши свой сегодняшний вес",footerText:"вес",titleNumber:r,isButtonVisible:n!==p(),defaultDialogValue:r.toString(),progressValue:r<=t?Math.round((t-r)/(t-a)*1e3)/10:0,progressText:`Прогресс ‑ ${r<=t?Math.round((t-r)/(t-a)*1e3)/10:0} %. Цель ‑ ${a} кг. Осталось ‑ ${Math.round((t-a)*10)/10} кг`,indicatorStyle:"bg-gradient-to-r from-red-400 via-yellow-400 to-green-400",onSave:i=>{const o={currentWeigth:i,balance:c};n!==p()&&(o.currentWeigthDate=p(),v.success("Молодец! +100",{classNames:{toast:"flex justify-center !w-fit relative left-[50%] translate-x-[-50%] ",title:"text-base ml-2 text-nowrap"}}),o.balance+=100),d(o)}}}function H({variant:s,startWeigth:t,targetWeigth:a}){const r=A(),n={weigth:`
        ${t?"начальный вес":""} 
        ${t&&a?"и":""} 
        ${a?"цель":""}
    `,callories:"допустимое количество калорий в день"};return e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-center",children:`Для отображения данного блока необходимо указать ${n[s]}`}),e.jsx(m,{variant:"rose",className:"block ml-auto mr-0 mt-4 leading-4",onClick:()=>r("/settings"),children:"Указать"})]})}function T(){const s=N(),{startWeigth:t,targetWeigth:a,startWeigthDate:r,currentWeigth:n,currentWeigthDate:c}=s,d=F(),l=!x("(min-width: 768px), (max-width: 639.5px)"),i=!x("(min-width: 400.5px)");return e.jsx(j,{children:t&&a&&r&&n&&c?e.jsx(G,{...De(l||i,s,o=>d(C(o)))}):e.jsx(H,{variant:"weigth",startWeigth:!t,targetWeigth:!a})})}function $e(s,{balance:t,currentCallories:a,maxCallories:r,currentCalloriesDate:n},c){return{variant:"callories",icon:e.jsx(de,{className:"stroke-rose-300 size-14"}),title1:"Калории дня ",title2:"ккал",dialogTriggerText:"Добавить калории",dialogHeader:"Запиши калории",footerText:"калории",titleNumber:a,isButtonVisible:!0,defaultDialogValue:"",progressValue:a<r?a/r*100:100,progressText:`${s?"М":"Сегодня еще м"}ожно скушать - ${a<r?Math.round(r-a):0} ккал`,indicatorStyle:`${a<=r?"bg-green-400":"bg-red-400"}`,onSave:l=>{const i={currentCallories:a+l,balance:t,currentCalloriesDate:n};n!==p()&&(i.currentCalloriesDate=p(),v.success("Молодец! +100",{classNames:{toast:"flex justify-center !w-fit relative left-[50%] translate-x-[-50%] ",title:"text-base ml-2 text-nowrap"}}),i.balance=t+100),a<=r&&a+l>r&&(v.warning("Переела! -200",{classNames:{toast:"flex justify-center !w-fit relative left-[50%] translate-x-[-50%] ",title:"text-base ml-2 text-nowrap"}}),i.balance=i.balance-200),c(i)}}}function B(){const s=N(),{maxCallories:t}=s,a=F(),r=!x("(min-width: 768px), (max-width: 639.5px)"),n=!x("(min-width: 400.5px)");return e.jsx(j,{children:t?e.jsx(G,{...$e(r||n,s,c=>a(C(c)))}):e.jsx(H,{variant:"callories"})})}const I="stroke-rose-300 size-14 absolute",h={tasks:{icon:e.jsx(K,{className:I}),arr:e.jsx(ne,{}),title:"Задания дня!",description:"Успей выполнить пока награда так высока!",keyOfStorage:"completedTasks",sign:"+"},awards:{icon:e.jsx(pe,{className:I}),arr:e.jsx(le,{}),title:"Скидки дня!",description:"Лишь бы звёздочек хватило(",keyOfStorage:"completedAwards",sign:"-"}};function q({variant:s}){return e.jsxs(e.Fragment,{children:[h[s].icon,e.jsx("p",{className:"text-xl text-center leading-14 mb-2",children:e.jsx("b",{children:h[s].title})}),e.jsx("p",{className:"text-base text-center mb-3",children:h[s].description}),e.jsx("div",{className:"flex flex-col gap-1",children:h[s].arr})]})}function _(){return e.jsx(j,{children:e.jsx(q,{variant:"tasks"})})}function V(){return e.jsx(j,{children:e.jsx(q,{variant:"awards"})})}function Pe(){const s=!x("(min-width: 768px)");return e.jsxs(e.Fragment,{children:[s&&e.jsxs("div",{children:[e.jsx(T,{}),e.jsx(B,{}),e.jsx(_,{}),e.jsx(V,{})]}),!s&&e.jsxs("div",{className:"flex",children:[e.jsxs("div",{className:"w-1/2",children:[e.jsx(T,{}),e.jsx(_,{})]}),e.jsxs("div",{className:"w-1/2",children:[e.jsx(B,{}),e.jsx(V,{})]})]})]})}function ze(){return e.jsxs(e.Fragment,{children:[e.jsx(he,{}),e.jsx(Pe,{})]})}export{ze as default};
